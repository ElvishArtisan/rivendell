<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="chapter.voicetracking">
  <title>VoiceTracking</title>
  <sect1 xml:id="sect.voicetracking.voicetracking_in_rivendell">
    <title>Voicetracking in Rivendell</title>
    <para>
      Voicetracking in Rivendell is a capability wherein custom
      &quot;one-off&quot; content is created and inserted into logs,
      making it possible to create programming that sounds very spontaneous
      and &quot;live&quot;.
      Such voicetracks are placed into a special type of audio
      cart known as a voicetrack cart. These carts are automatically
      created, deleted and managed by the voicetracker interface
      (accessible within both the RDLogEdit and RDAirPlay modules),
      with no manual user intervention required.
      The voicetracker module also includes extensive capabilities for
      allowing customization of the transitions between log elements.
    </para>
   <para>
     <mediaobject>
       <imageobject>
	 <imagedata align="center" fileref="voicetracking.voice_tracker_dialog.png" width="128mm" depth="117mm"/>
       </imageobject>
       <caption><para>The Voice Tracker Dialog</para></caption>
     </mediaobject>
   </para>
    <sect2 xml:id="sect.voicetracking.prerequisites">
      <title>Prerequisites</title>
      <para>
	Before beginning voicetracking for a particular service, a
	voicetracker group and pool of available cart numbers must be
	configured in the RDAdmin module. See
	<xref linkend="sect.rdadmin.managing_voicetracking" /> for
	more information.
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.voicetrack_markers">
      <title>VoiceTrack Markers</title>
      <para>
	A voicetrack marker is a meta event that can be inserted into a log
	as a &quot;placeholder&quot; to others to indicate where a voicetrack
	is to be recorded. Track markers can be inserted by RDLogEdit,
	RDLogManager events or even embedded in data generated by external
	schedulers.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="voicetracking.voice_tracker_dialog_track_selected.png" width="128mm" depth="117mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker Dialog (track selected)</para></caption>
	</mediaobject>
      </para>
    </sect2>
  </sect1>
  <sect1 xml:id="sect.voicetracking.using_the_voicetracker_dialog">
    <title>Using the Voicetrack Interface</title>
    <sect2 xml:id="sect.voicetracking.the_voicetracker_dialog">
      <title>The VoiceTracker Dialog</title>
      <para>
	There are two ways of accessing the voicetracker interface, via
	the RDLogEdit or RDAirPlay module. To access it using RDLogEdit,
	start the RDLogEdit module, highlight the desired log and touch the
	<computeroutput>VoiceTracker</computeroutput> button, opening
	the VoiceTracker dialog. Using RDAirPlay, touch the
	<computeroutput>Voice Tracker</computeroutput> button to make the
	interface appear on the right-hand side, then touch the
	<computeroutput>Load Log</computeroutput> and select the log to
	voicetrack.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="left" fileref="voicetracking.voice_tracker_button.png" width="35mm" depth="10mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker button in RDAirPlay</para></caption>
	</mediaobject>
      </para>
      <note>
	You may need to drag the RDAirPlay main window to a wider size in
	order to make the <computeroutput>Voice Tracker</computeroutput>
	appear.
      </note>

      <para>
	This dialog consists
	of three major parts: the waveform area, the log list and the control
	buttons.
      </para>
      <para>
	The waveform area is in the upper center part of the dialog, and
	consists of four &quot;panes&quot;. The upper three display waveform
	depictions while the fourth contains audition control buttons, an
	audio meter and	various counters.  Directly below this is the log
	list, showing a copy of the currently loaded log.  The control
	buttons occupy the bottom and right-hand edges of the dialog.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="voicetracking.voice_tracker_dialog_track_1_playing.png" width="128mm" depth="117mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker Dialog (1st track playing)</para></caption>
	</mediaobject>
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.editing_transitions">
      <title>Editing Transitions</title>
      <para>
	When an event is selected in the log list, a graphical depiction of
	the transition into that event is loaded into the waveform area.
	If the selected event and its prior event in the log is not a
	voicetrack or track marker, then the selected event will be
	displayed in the third pane of the waveform area and the previous
	event displayed in the first pane.  If the selected event or its
	prior event is a voicetrack or track marker, then voicetrack or
	marker will be displayed in the second pane of the waveform area.
      </para>
      <para>
	Once selected, a transition can be auditioned by touching the play 
	button in the fourth pane of the waveform area.  Play will start
	from the left-hand edge of the topmost waveform.  This start
	location can be adjusted by dragging the topmost waveform to the
	left or right by means of the mouse or touchscreen.  If the
	transition type of the selected event is SEGUE, it is also possible
	to adjust the degree of audio overlap by dragging the second or
	third waveform as well.  It's possible to “undo” changes made in
	the segue overlap by right-clicking on the waveform and selecting
	<computeroutput>Undo Segue Changes</computeroutput> from the menu.
	To make the overlap permanent,
	touch the <computeroutput>Save</computeroutput> button. To restore
	the transition to its default
	state (calculated on the basis of segue markers from the Library)
	touch the <computeroutput>Do Over</computeroutput>  button.
	The transition type can be changed by
	right-clicking on an event and selecting the desired transition
	type from the menu.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="voicetracking.voice_tracker_dialog_recording.png" width="128mm" depth="117mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker Dialog (recording)</para></caption>
	</mediaobject>
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.inserting_and_deleting_track_markers">
      <title>Inserting and Deleting Track Markers</title>
      <para>
	It is possible to insert a new voicetrack marker by selecting the
	desired location in the log list and touching the
	<computeroutput>Insert Track</computeroutput>
	button. An existing voicetrack marker can likewise by deleted by
	selecting it in the log list and touching the
	<computeroutput>Delete Track</computeroutput> button.
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.moving_between_track_markers">
      <title>Moving Between Track Markers</title>
      <para>
	It is possible to move directly to the next or previous voicetrack
	marker simply by touching the
	<computeroutput>Next Track</computeroutput> or
	<computeroutput>Previous Track</computeroutput> buttons,
	respectively.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="voicetracking.voice_tracker_dialog_track_2_playing.png" width="128mm" depth="117mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker Dialog (2nd track playing)</para></caption>
	</mediaobject>
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.recording_a_voicetrack">
      <title>Recording a Voicetrack</title>
      <para>
	Once the desired voicetrack marker has been selected, the process
	of recording a voicetrack consists of four steps, each initiated by
	one of the four square control buttons in the upper right-hand
	corner of the dialog.
      </para>
      <para>
	To begin, touch the topmost
	<computeroutput>Start</computeroutput> button. This will cause the
	audio in the topmost pane to begin playing, with a cursor to show
	playback position. To begin the actual
	recording, touch the <computeroutput>Record</computeroutput> button.
	To start the following event (in the third pane), touch the second 
	<computeroutput>Start</computeroutput>
	button.  Finally, to stop recording, touch
	the <computeroutput>Save</computeroutput> button.
	The record process can be
	canceled at any time by touching the
	<computeroutput>Abort</computeroutput> button, restoring the 
	transition to its default state. It is also possible to undo a
	completed voicetrack by touching the
	<computeroutput>Do Over</computeroutput> button.
      </para>
      <para>
	Once completed, the segue overlaps into and out of a voicetrack can
	be adjusted in the same manner as for simple transitions –i.e. by
	dragging the appropriate waveforms with the mouse.
      </para>
      <para>
	<mediaobject>
	  <imageobject>
	    <imagedata align="center" fileref="voicetracking.voice_tracker_dialog_track_completed.png" width="128mm" depth="117mm"/>
	  </imageobject>
	  <caption><para>The Voice Tracker Dialog (track completed)</para></caption>
	</mediaobject>
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.adjusting_transition_levels">
      <title>Adjusting Transition Levels</title>
      <para>
	It is possible to adjust the audio fade levels applied during
	transitions by means of rubber bands on the waveform displays.
	These are green lines with small square targets. To adjust a rubber
	band, use the mouse to grab one of the targets and drag it to the
	desired location.
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.importing_voicetracks">
      <title>Importing Voicetracks</title>
      <para>
	In addition to recording in realtime, it's possible to import a
	voicetrack directly from an audio file.  To do so, select the
	desired voicetrack marker and then touch the
	<computeroutput>Import</computeroutput> button to open
	the Import/Export Audio dialog. (For more
	information on using the Import/Export Audio dialog, see Section 
	3.1.0 Importing Audio from a File). Once imported, the voicetrack
	can be manipulated in the same manner as those that were directly
	recorded.
      </para>
    </sect2>
    <sect2 xml:id="sect.voicetracking.hitting_the_post">
      <title>Hitting the Post</title>
      <para>
	If the event following a voicetrack has its Talk Time markers set,
	it is possible to set the transition so that the end of the
	voicetrack automatically aligns with the end of the Talk Time
	(commonly referred to as hitting the post). To do this, simply
	touch the <computeroutput>Hit Post</computeroutput> button.
      </para>
    </sect2>
  </sect1>
</chapter>
