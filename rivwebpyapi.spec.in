%{!?python_sitearch: %global python_sitearch %(%{__python} -c "from distutils.sysconfig import get_python_lib; print get_python_lib(1)")}

# Turn off brp-python-bytecompile automagic
# See  https://fedoraproject.org/wiki/Changes/No_more_automagic_Python_bytecompilation
%global _python_bytecompile_extra 0

# So python bytecompilation works correctly
%define __python /usr/bin/python3.6

Name:           python36-rivwebpyapi
Version:        @VERSION@
Release:        1%{?dist}
Summary:        Python 3.6 interface for accessing the Rivendell Web API
Group:          Development/Languages
License:        LGPLv2
URL:            https://github.com/ElvishArtisan/rivendell
Source:         rivendell-%{version}.tar.gz
Requires:       python36-requests
BuildRequires:  python36-devel

%description
This is a Python 3 language binding for the Rivendell Web API.

%prep


%setup -q -n rivendell-%{version}


%build
export PYTHON=/usr/bin/python3.6
%configure --libexecdir=@libexecdir@ --sysconfdir=@sysconfdir@ @RDXPORTDEBUG@

%install
make -C apis/rivwebpyapi install DESTDIR=$RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples
helpers/install_python.sh apis/rivwebpyapi/tests/add_cart.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/add_cart.py
helpers/install_python.sh apis/rivwebpyapi/tests/add_cut.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/add_cut.py
helpers/install_python.sh apis/rivwebpyapi/tests/add_log.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/add_log.py
helpers/install_python.sh apis/rivwebpyapi/tests/assign_sched_code.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/assign_sched_code.py
helpers/install_python.sh apis/rivwebpyapi/tests/audio_info.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/audio_info.py
helpers/install_python.sh apis/rivwebpyapi/tests/audio_store.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/audio_store.py
helpers/install_python.sh apis/rivwebpyapi/tests/delete_audio.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/delete_audio.py
helpers/install_python.sh apis/rivwebpyapi/tests/delete_log.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/delete_log.py
helpers/install_python.sh apis/rivwebpyapi/tests/edit_cart.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/edit_cart.py
helpers/install_python.sh apis/rivwebpyapi/tests/edit_cut.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/edit_cut.py
helpers/install_python.sh apis/rivwebpyapi/tests/export_peaks.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/export_peaks.py
helpers/install_python.sh apis/rivwebpyapi/tests/export.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/export.py
helpers/install_python.sh apis/rivwebpyapi/tests/get_podcast.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/get_podcast.py
helpers/install_python.sh apis/rivwebpyapi/tests/import.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/import.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_cart.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_cart.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_cart_sched_codes.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_cart_sched_codes.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_carts.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_carts.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_cut.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_cut.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_cuts.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_cuts.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_group.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_group.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_groups.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_groups.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_log.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_log.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_logs.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_logs.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_scheduler_codes.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_scheduler_codes.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_services.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_services.py
helpers/install_python.sh apis/rivwebpyapi/tests/list_system_settings.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/list_system_settings.py
helpers/install_python.sh apis/rivwebpyapi/tests/lock_log.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/lock_log.py
helpers/install_python.sh apis/rivwebpyapi/tests/post_image.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/post_image.py
helpers/install_python.sh apis/rivwebpyapi/tests/post_podcast.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/post_podcast.py
helpers/install_python.sh apis/rivwebpyapi/tests/post_rss.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/post_rss.py
helpers/install_python.sh apis/rivwebpyapi/tests/rehash.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/rehash.py
helpers/install_python.sh apis/rivwebpyapi/tests/remove_cart.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/remove_cart.py
helpers/install_python.sh apis/rivwebpyapi/tests/remove_cut.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/remove_cut.py
helpers/install_python.sh apis/rivwebpyapi/tests/remove_image.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/remove_image.py
helpers/install_python.sh apis/rivwebpyapi/tests/remove_podcast.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/remove_podcast.py
helpers/install_python.sh apis/rivwebpyapi/tests/remove_rss.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/remove_rss.py
helpers/install_python.sh apis/rivwebpyapi/tests/save_log.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/save_log.py
helpers/install_python.sh apis/rivwebpyapi/tests/save_podcast.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/save_podcast.py
helpers/install_python.sh apis/rivwebpyapi/tests/trim_audio.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/trim_audio.py
helpers/install_python.sh apis/rivwebpyapi/tests/unassign_sched_code.py $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/examples/unassign_sched_code.py
cp LICENSES/LGPLv2.txt $RPM_BUILD_ROOT/%{_datadir}/doc/%{name}-%{version}/

%files
/usr/lib64/python3.6/site-packages/rivwebpyapi.py
/usr/lib64/python3.6/site-packages/__pycache__/*
%{_datadir}/doc/%{name}-%{version}


%changelog
* @RPM_DATESTAMP@ Fred Gleason <fredg@paravelsystems.com> - @VERSION@-@RPM_RELEASE@
-- Autogenerated from build tree.
